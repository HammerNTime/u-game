<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/profiles/show.css">
<%- include('../partials/nav') %>

<main>
  <div class="profile-container">
    <div class="avatar-container">
      <% if (profile.avatar) { %>
        <img 
          class="profile-avatar"
          src="<%= profile.avatar %>"
          alt="<%= profile.name %> avatar"
        >
      <% } else { %>
        <div>
          <img class="profile-avatar" src="https://www.creativeboom.com/uploads/articles/74/746ceb5d478678ae3627e314dac5c436e03c03a2_810.jpg" alt="Placeholder Avatar Img">
        </div>
      <% } %> 
    </div>
    <div class="profile-content-container">
      <div class="profile-name">
        <%= profile.name %> 
      </div>
      <% if (profile.bio) { %>
        <div class="profile-bio">
          <%= profile.bio %> 
        </div>
      <% } %> 
      <% if (profile.twitchUrl) { %> 
        <div class="profile-twitch">
          <a href="<%= profile.twitchUrl %> ">
            Twitch Link
          </a>
        </div>
      <% } %> 
      <div class="console-container">
        <% profile.console.forEach(console => { %>
          <div class="console-container-child">
            <div>
              <%= console.system %> 
            </div>
            <div>
              <%= console.gamerTag %> 
            </div>
          </div>
        <% }) %>  
      </div>
    </div>
  </div>
  <div class="edit-btn-container">
    <% if (isSelf) { %> 
      <a href="/profiles/<%= profile._id %>/edit">
        <button class="edit-btn">Edit Profile</button>
      </a>
    <% } %> 
  </div>

  <div class="lower-container">
    <div class="game-img-text-container">
      <h2>Owned Games</h3>
      <div class="game-img-container">
        <% profile.ownedGames.forEach(game => { %> 
        <a href="/games/<%= game._id %>" class="game-img-url">
          <img class="game-image-url" src="<%= game.imageUrl %>" alt="<%= game.title %>">
        </a>
        <% }) %> 
      </div>
    </div>
    <div class="review-container">
      <% profile.reviews.forEach(review => { %> 
        <div>
          <a href="/reviews/<%= review._id %>">
            <%= review.title %> 
          </a>
        </div>
        <% if (review.rating === "5") { %>   
          <div>⭐⭐⭐⭐⭐</div>
        <% } else if (review.rating === "4") { %>
          <div>⭐⭐⭐⭐</div> 
        <% } else if (review.rating === "3") { %> 
          <div>⭐⭐⭐</div> 
        <% } else if (review.rating === "2") { %> 
          <div>⭐⭐</div> 
        <% } else if (review.rating === "1") { %> 
          <div>⭐</div> 
        <% } %> 
        <div>
          <%= review.content %> 
        </div>
      <% }) %>       
    </div>
  </div>
</main>

<%- include('../partials/footer') %>